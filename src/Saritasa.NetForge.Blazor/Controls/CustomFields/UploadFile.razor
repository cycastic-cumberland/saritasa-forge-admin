@using Saritasa.NetForge.Blazor.Extensions
@inherits CustomField

<MudStack Row>
    <MudFileUpload T="IBrowserFile" FilesChanged="UploadFileAsync">
        <ButtonTemplate>
            <MudButton HtmlTag="label"
                       Variant="Variant.Filled"
                       Color="Color.Primary"
                       StartIcon="@Icons.Material.Filled.CloudUpload"
                       for="@context.Id">
                Upload @Property.Name.ToMeaningfulName()
            </MudButton>
        </ButtonTemplate>
    </MudFileUpload>

    @{
        if (selectedFileBytes is not null)
        {
            var fileBytes = $"data:{selectedFile!.ContentType};base64,{Convert.ToBase64String(selectedFileBytes)}";

            <div>
                <MudImage Src="@fileBytes"
                          Elevation="25"
                          Class="rounded-lg property-image" />
            </div>
        }
    }
</MudStack>
